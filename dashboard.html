<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>ProductivityFlow Dashboard - Unified View</title>

    <link rel="stylesheet" href="theme.css" />

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>

    <style>

    body { margin: 0; background: none; }



    .dashboard-shell {

        display: flex;

        flex-direction: column;

        gap: var(--space-5);

    }



    .dashboard-header {

        display: flex;

        flex-direction: column;

        gap: var(--space-3);

        padding: var(--space-4);

        background: rgba(18, 28, 44, 0.9);

        border: 1px solid rgba(148, 163, 184, 0.18);

        border-radius: var(--radius-lg);

        box-shadow: var(--shadow-sm);

        backdrop-filter: var(--blur-backdrop);

    }



    .dashboard-title {

        font-size: 1.6rem;

        font-weight: 700;

        margin: 0;

        color: var(--color-text-primary);

    }



    .dashboard-nav {

        display: flex;

        flex-wrap: wrap;

        gap: var(--space-2);

    }



    .nav-tab {

        border: 1px solid rgba(148, 163, 184, 0.22);

        border-radius: var(--radius-sm);

        padding: var(--space-2) var(--space-3);

        background: rgba(17, 26, 40, 0.7);

        color: var(--color-text-secondary);

        font-weight: 600;

        cursor: pointer;

        transition: background var(--transition-base), border-color var(--transition-base), color var(--transition-base);

    }



    .nav-tab:hover {

        background: rgba(91, 143, 255, 0.14);

        color: var(--color-text-primary);

        border-color: rgba(91, 143, 255, 0.32);

    }



    .nav-tab.active {

        background: rgba(91, 143, 255, 0.18);

        border-color: rgba(91, 143, 255, 0.42);

        color: var(--color-text-primary);

        box-shadow: var(--shadow-inset);

    }



    .dashboard-grid {

        display: grid;

        gap: var(--space-4);

    }



    .metrics-row {

        display: grid;

        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));

        gap: var(--space-4);

    }



    .metric-card {

        position: relative;

        padding: var(--space-4);

        border-radius: var(--radius-lg);

        border: 1px solid rgba(148, 163, 184, 0.2);

        background: rgba(17, 26, 40, 0.82);

        box-shadow: var(--shadow-sm);

        display: grid;

        gap: var(--space-2);

        transition: transform var(--transition-base), border-color var(--transition-base), box-shadow var(--transition-base);

    }



    .metric-card:hover {

        transform: translateY(-2px);

        border-color: rgba(91, 143, 255, 0.32);

        box-shadow: var(--shadow-md);

    }



    .metric-label {

        font-size: 0.75rem;

        letter-spacing: 0.1em;

        text-transform: uppercase;

        color: var(--color-text-muted);

    }



    .metric-value {

        font-size: 2.1rem;

        font-weight: 700;

        color: var(--color-text-primary);

    }



    .metric-change {

        font-size: 0.85rem;

        display: flex;

        gap: 0.35rem;

        align-items: center;

        font-weight: 600;

    }



    .metric-change.positive { color: var(--accent-success); }

    .metric-change.negative { color: var(--accent-danger); }



    .metric-chart { height: 60px; }



    .dashboard-main {

        display: grid;

        gap: var(--space-4);

        grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));

    }



    .panel {

        padding: var(--space-4);

        border-radius: var(--radius-lg);

        border: 1px solid rgba(148, 163, 184, 0.2);

        background: rgba(18, 28, 44, 0.82);

        box-shadow: var(--shadow-sm);

        display: grid;

        gap: var(--space-3);

    }



    .panel-header {

        display: flex;

        align-items: center;

        justify-content: space-between;

        gap: var(--space-2);

    }



    .panel-title {

        font-size: 1rem;

        font-weight: 600;

        text-transform: uppercase;

        letter-spacing: 0.08em;

        color: var(--color-text-secondary);

    }



    .btn-quick-add {

        border: 1px solid rgba(91, 143, 255, 0.32);

        border-radius: var(--radius-sm);

        padding: var(--space-2) var(--space-3);

        background: rgba(91, 143, 255, 0.12);

        color: var(--color-text-primary);

        cursor: pointer;

        transition: background var(--transition-base), border-color var(--transition-base);

    }



    .btn-quick-add:hover {

        background: rgba(91, 143, 255, 0.2);

        border-color: rgba(91, 143, 255, 0.42);

    }



    .task-list { display: grid; gap: var(--space-2); }



    .task-item {

        display: grid;

        grid-template-columns: auto 1fr auto;

        gap: var(--space-3);

        align-items: center;

        padding: var(--space-2) var(--space-3);

        border-radius: var(--radius-sm);

        border: 1px solid rgba(148, 163, 184, 0.16);

        background: rgba(15, 23, 42, 0.6);

    }



    .task-checkbox {

        width: 18px;

        height: 18px;

        border-radius: 4px;

        border: 1px solid rgba(148, 163, 184, 0.32);

        display: flex;

        align-items: center;

        justify-content: center;

        font-size: 0.7rem;

        color: var(--accent-primary);

    }



    .task-title { font-weight: 600; }



    .task-meta { display: flex; gap: var(--space-2); font-size: 0.8rem; color: var(--color-text-muted); }



    .task-priority {

        font-size: 0.75rem;

        padding: 0.25rem 0.6rem;

        border-radius: 999px;

        border: 1px solid rgba(148, 163, 184, 0.24);

        text-transform: uppercase;

        letter-spacing: 0.08em;

    }



    .priority-high { border-color: rgba(248, 113, 113, 0.4); color: var(--accent-danger); }

    .priority-medium { border-color: rgba(251, 191, 36, 0.35); color: var(--accent-warning); }

    .priority-low { border-color: rgba(52, 211, 153, 0.35); color: var(--accent-success); }



    .insights, .productivity-view { display: grid; gap: var(--space-3); }



    .insight-item {

        padding: var(--space-3);

        border-radius: var(--radius-sm);

        border: 1px solid rgba(148, 163, 184, 0.16);

        background: rgba(17, 26, 40, 0.64);

        display: grid;

        gap: var(--space-2);

    }



    .insight-item span { font-size: 0.75rem; letter-spacing: 0.08em; text-transform: uppercase; color: var(--color-text-muted); }



    .insight-item strong { font-size: 1rem; }



    .chart-container {

        height: 320px;

        border-radius: var(--radius-md);

        border: 1px solid rgba(148, 163, 184, 0.18);

        background: rgba(15, 23, 42, 0.6);

    }



    .settings-panel { display: grid; gap: var(--space-3); }

    .settings-row { display: flex; justify-content: space-between; align-items: center; gap: var(--space-3); padding: var(--space-3); border-radius: var(--radius-sm); border: 1px solid rgba(148, 163, 184, 0.18); background: rgba(15, 23, 42, 0.55); }

    .settings-label { display: grid; gap: 4px; }

    .settings-label span:first-child { font-weight: 600; }

    .settings-label span:last-child { font-size: 0.85rem; color: var(--color-text-muted); }



    .chart-grid { display: grid; gap: var(--space-4); grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); }

</style>

</head>

<body>

    <!-- Header -->

    <div class="header-nav">

        <div class="brand">Prios</div>

        <div class="links">

            <a href="index.html">Home</a>

            <a href="dashboard.html" class="active">Dashboard</a>

            <a href="todo-list.html">To-Do</a>

            <a href="task-planner-enhanced.html">Planner</a>

            <a href="productivity-parallel-coords.html">Analytics</a>

        </div>

    </div>

    <main class="app-shell dashboard-shell">



    <section class="dashboard-header surface-card">

        <div class="dashboard-title">ProductivityFlow Dashboard</div>

        <div class="dashboard-nav">

            <button class="nav-tab active" onclick="showView('dashboard', this)">Dashboard</button>

            <button class="nav-tab" onclick="location.href='task-planner-enhanced.html'">Planner</button>

            <button class="nav-tab" onclick="location.href='todo-list.html'">To-Do List</button>

            <button class="nav-tab" onclick="location.href='productivity-parallel-coords.html'">Analytics</button>

            <button class="nav-tab" onclick="showSettings()">Settings</button>

        </div>

    </div>



    <!-- Main Dashboard -->

        <section class="dashboard-grid">

        <!-- Metrics Row -->

        <div class="metrics-row">

            <div class="metric-card">

                <div class="metric-label">Today's Score</div>

                <div class="metric-value" id="todayScore">78.5</div>

                <div class="metric-change positive">

                      5.2% from yesterday

                </div>

                <div class="metric-chart" id="sparkline1"></div>

            </div>

            

            <div class="metric-card">

                <div class="metric-label">Tasks Completed</div>

                <div class="metric-value" id="tasksCompleted">12/15</div>

                <div class="metric-change positive">

                    80% completion rate

                </div>

                <div class="time-distribution" id="weekDistribution"></div>

            </div>

            

            <div class="metric-card">

                <div class="metric-label">Weekly Average</div>

                <div class="metric-value" id="weeklyAvg">72.3</div>

                <div class="metric-change negative">

                      2.1% from last week

                </div>

                <div class="metric-chart" id="sparkline2"></div>

            </div>

            

            <div class="metric-card">

                <div class="metric-label">Goal Progress</div>

                <div class="metric-value" id="goalProgress">65%</div>

                <div class="metric-change positive">

                    3 goals on track

                </div>

                <div class="metric-chart" id="sparkline3"></div>

            </div>

        </div>



        <!-- Task List Panel -->

        <div class="panel">

            <div class="panel-header">

                <div class="panel-title">Today's Tasks</div>

                <button onclick="openQuickAdd()" class="btn-quick-add">

                    + Add Task

                </button>

            </div>

            <div class="task-list" id="todayTaskList">

                <!-- Tasks will be dynamically loaded here -->

                <div class="task-item">

                    <div class="task-checkbox"> </div>

                    <div class="task-content">

                        <div class="task-title">Morning Team Standup</div>

                        <div class="task-meta">

                            <span>8:30 AM</span>

                            <span>30 min</span>

                            <span>Work</span>

                        </div>

                    </div>

                    <div class="task-priority priority-high">High</div>

                </div>

                

                <div class="task-item">

                    <div class="task-checkbox"></div>

                    <div class="task-content">

                        <div class="task-title">Review Q4 Product Roadmap</div>

                        <div class="task-meta">

                            <span>10:00 AM</span>

                            <span>60 min</span>

                            <span>Work</span>

                        </div>

                    </div>

                    <div class="task-priority priority-high">High</div>

                </div>

                

                <div class="task-item">

                    <div class="task-checkbox"></div>

                    <div class="task-content">

                        <div class="task-title">Gym Session</div>

                        <div class="task-meta">

                            <span>6:00 PM</span>

                            <span>90 min</span>

                            <span>Fitness</span>

                        </div>

                    </div>

                    <div class="task-priority priority-medium">Medium</div>

                </div>

                

                <div class="task-item">

                    <div class="task-checkbox"></div>

                    <div class="task-content">

                        <div class="task-title">Spanish Practice</div>

                        <div class="task-meta">

                            <span>7:30 PM</span>

                            <span>30 min</span>

                            <span>Learning</span>

                        </div>

                    </div>

                    <div class="task-priority priority-low">Low</div>

                </div>

            </div>

        </div>



        <!-- Visualization Panel -->

        <div class="panel">

            <div class="panel-header">

                <div class="panel-title">Productivity Trajectory</div>

                <select class="select-control" aria-label="Time range selector">

                    <option>This Week</option>

                    <option>Last Week</option>

                    <option>This Month</option>

                    <option>Last Month</option>

                </select>

            </div>

            <div id="parallelChart"></div>

        </div>

    </div>



    <!-- Floating Action Menu -->

    <div class="fab-menu">

        <div class="fab-options" id="fabOptions">

            <div class="fab-option">

                <span class="fab-label">To-Do List</span>

                <button class="fab-btn" onclick="location.href='todo-list.html'"> </button>

            </div>

            <div class="fab-option">

                <span class="fab-label">Add Task</span>

                <button class="fab-btn" onclick="addTask()"> </button>

            </div>

            <div class="fab-option">

                <span class="fab-label">Start Focus</span>

                <button class="fab-btn" onclick="startFocus()">  </button>

            </div>

        </div>

        <button class="fab-main" onclick="toggleFab()" id="fabMain">+</button>

    </div>



    <script>

        // Initialize dashboard

        let parallelChart;

        let fabOpen = false;

        

        // Initialize ECharts

        document.addEventListener('DOMContentLoaded', function() {

            initializeParallelChart();

            loadDashboardData();

            initializeSparklines();

            initializeWeekDistribution();

        });

        

        function initializeParallelChart() {

            parallelChart = echarts.init(document.getElementById('parallelChart'));

            

            const option = {

                backgroundColor: 'transparent',

                parallelAxis: [

                    {dim: 0, name: 'Sun', min: 0, max: 100},

                    {dim: 1, name: 'Mon', min: 0, max: 100},

                    {dim: 2, name: 'Tue', min: 0, max: 100},

                    {dim: 3, name: 'Wed', min: 0, max: 100},

                    {dim: 4, name: 'Thu', min: 0, max: 100},

                    {dim: 5, name: 'Fri', min: 0, max: 100},

                    {dim: 6, name: 'Sat', min: 0, max: 100}

                ],

                visualMap: {

                    show: false,

                    min: 0,

                    max: 100,

                    dimension: 7,

                    inRange: {

                        color: ['#BA55D3', '#9932CC', '#8B008B', '#4B0082', '#191970',

                               '#0000CD', '#0000FF', '#4169E1', '#00BFFF', '#00CED1',

                               '#40E0D0', '#48D1CC', '#00FA9A', '#90EE90', '#ADFF2F',

                               '#FFFF00', '#FFD700', '#FFA500', '#FF8C00', '#FF6347']

                    }

                },

                parallel: {

                    left: 20,

                    right: 20,

                    top: 40,

                    bottom: 20,

                    parallelAxisDefault: {

                        type: 'value',

                        nameLocation: 'end',

                        nameGap: 20,

                        nameTextStyle: {

                            fontSize: 12,

                            color: '#666'

                        },

                        axisLine: {

                            lineStyle: {

                                color: '#ddd'

                            }

                        },

                        axisTick: {

                            lineStyle: {

                                color: '#ddd'

                            }

                        },

                        splitLine: {

                            show: false

                        },

                        axisLabel: {

                            color: '#999'

                        }

                    }

                },

                series: [

                    {

                        name: 'Productivity',

                        type: 'parallel',

                        lineStyle: {

                            width: 2,

                            opacity: 0.3

                        },

                        data: generateMockData()

                    }

                ]

            };

            

            parallelChart.setOption(option);

            

            // Responsive

            window.addEventListener('resize', function() {

                parallelChart.resize();

            });

        }

        

        function generateMockData() {

            const data = [];

            for (let i = 0; i < 20; i++) {

                const line = [];

                let base = 30 + Math.random() * 40;

                

                for (let j = 0; j < 7; j++) {

                    let value = base;

                    

                    // Weekly patterns

                    if (j === 1 || j === 2) value += 15; // Mon-Tue boost

                    if (j === 4) value -= 10; // Thu dip

                    if (j === 0 || j === 6) value += (Math.random() - 0.5) * 20; // Weekend variability

                    

                    value += (Math.random() - 0.5) * 10;

                    line.push(Math.max(0, Math.min(100, value)));

                }

                

                // Add value for color

                line.push(Math.random() * 100);

                data.push(line);

            }

            return data;

        }

        

        function initializeSparklines() {

            // Simple sparkline implementation

            const canvas1 = document.createElement('canvas');

            canvas1.width = 250;

            canvas1.height = 60;

            document.getElementById('sparkline1').appendChild(canvas1);

            

            const ctx = canvas1.getContext('2d');

            ctx.strokeStyle = '#667eea';

            ctx.lineWidth = 2;

            ctx.beginPath();

            

            for (let i = 0; i < 7; i++) {

                const x = i * 35 + 10;

                const y = 30 + (Math.random() - 0.5) * 20;

                if (i === 0) ctx.moveTo(x, y);

                else ctx.lineTo(x, y);

            }

            

            ctx.stroke();

        }

        

        function initializeWeekDistribution() {

            const container = document.getElementById('weekDistribution');

            const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];

            const values = [60, 85, 90, 75, 65, 80, 70];

            

            container.innerHTML = '';

            

            days.forEach((day, index) => {

                const dayBar = document.createElement('div');

                dayBar.className = 'day-bar';

                

                dayBar.innerHTML = `

                    <div class="day-label">${day}</div>

                    <div class="day-progress">

                        <div class="day-fill" style="height: ${values[index]}%"></div>

                        <div class="day-value">${values[index]}%</div>

                    </div>

                `;

                

                container.appendChild(dayBar);

            });

        }

        

        function loadDashboardData() {

            // Load from IndexedDB or localStorage

            const savedData = localStorage.getItem('productivityVisualizationData');

            if (savedData) {

                const data = JSON.parse(savedData);

                updateMetrics(data);

            }

        }

        

        function updateMetrics(data) {

            // Update metric cards with real data

            if (data.metadata) {

                document.getElementById('todayScore').textContent = 

                    (data.metadata.statistics?.mean || 75).toFixed(1);

            }

        }

        

        function toggleFab() {

            fabOpen = !fabOpen;

            const options = document.getElementById('fabOptions');

            const main = document.getElementById('fabMain');

            

            if (fabOpen) {

                options.classList.add('active');

                main.style.transform = 'rotate(45deg)';

            } else {

                options.classList.remove('active');

                main.style.transform = 'rotate(0deg)';

            }

        }

        

        function addTask() {

            window.location.href = 'task-planner-enhanced.html';

        }

        

        function addGoal() {

            window.location.href = 'task-planner-enhanced.html#goals';

        }

        

        // Simple Focus Mode (25-minute Pomodoro)

        let focusTimerId = null;

        function startFocus() {

            if (document.getElementById('focusModal')) return;

            const backdrop = document.createElement('div');

            backdrop.className = 'modal-backdrop active';

            const modal = document.createElement('div');

            modal.className = 'modal';

            modal.id = 'focusModal';

            modal.innerHTML = `

                <h3 style="margin-top:0">Focus Mode</h3>

                <p>Stay focused for <b>25:00</b>. You can pause or end anytime.</p>

                <div id="focusTime" style="font-size:2rem; margin:0.5rem 0;">25:00</div>

                <div style="display:flex; gap:.5rem; justify-content:flex-end;">

                    <button id="pauseFocus" class="btn-secondary">Pause</button>

                    <button id="endFocus" class="btn">End</button>

                </div>`;

            document.body.appendChild(modal);

            document.body.appendChild(backdrop);



            let seconds = 25*60; let paused = false;

            const update = ()=>{

                const m = Math.floor(seconds/60).toString().padStart(2,'0');

                const s = (seconds%60).toString().padStart(2,'0');

                document.getElementById('focusTime').textContent = `${m}:${s}`;

            };

            update();

            focusTimerId = setInterval(()=>{

                if(!paused){ seconds=Math.max(0,seconds-1); update(); }

                if(seconds===0){ end(); alert('Great job! Focus session complete.'); }

            },1000);

            function end(){ clearInterval(focusTimerId); backdrop.remove(); modal.remove(); }

            document.getElementById('pauseFocus').onclick = ()=>{ paused=!paused; document.getElementById('pauseFocus').textContent = paused? 'Resume':'Pause'; };

            document.getElementById('endFocus').onclick = end;

        }

        

        function showView(view, el) {

            // Update active tab

            document.querySelectorAll('.nav-tab').forEach(tab => {

                tab.classList.remove('active');

            });

            if (el) el.classList.add('active');

        }

        

        function showSettings() {

            alert('Settings panel coming soon!');

        }

        

        function openQuickAdd() {

            window.location.href = 'task-planner-enhanced.html#quick-add';

        }

        

        // Auto-refresh data every 30 seconds

        setInterval(loadDashboardData, 30000);

    </script>

    

    <!-- Include integration layer -->
    <script src="productivity-core.js"></script>
    <script src="integration.js"></script>
  </section>

</main>

</body>
</html>
